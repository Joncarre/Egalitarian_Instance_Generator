{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst config_env_1 = require(\"../internal/core/config/config-env\");\n\nconst global_dir_1 = require(\"../internal/util/global-dir\");\n\nconst task_names_1 = require(\"./task-names\");\n\nconfig_env_1.subtask(task_names_1.TASK_CLEAN_GLOBAL, async () => {\n  const globalCacheDir = await global_dir_1.getCacheDir();\n  await fs_extra_1.default.emptyDir(globalCacheDir);\n});\nconfig_env_1.task(task_names_1.TASK_CLEAN, \"Clears the cache and deletes all artifacts\").addFlag(\"global\", \"Clear the global cache\").setAction(async ({\n  global\n}, {\n  config,\n  run\n}) => {\n  if (global) {\n    return run(task_names_1.TASK_CLEAN_GLOBAL);\n  }\n\n  await fs_extra_1.default.emptyDir(config.paths.cache);\n  await fs_extra_1.default.remove(config.paths.artifacts);\n});","map":{"version":3,"sources":["../src/builtin-tasks/clean.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,MAAA,UAAA,GAAA,eAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;;AAEA,MAAA,YAAA,GAAA,OAAA,CAAA,oCAAA,CAAA;;AACA,MAAA,YAAA,GAAA,OAAA,CAAA,6BAAA,CAAA;;AAEA,MAAA,YAAA,GAAA,OAAA,CAAA,cAAA,CAAA;;AAEA,YAAA,CAAA,OAAA,CAAQ,YAAA,CAAA,iBAAR,EAA2B,YAAW;AACpC,QAAM,cAAc,GAAG,MAAM,YAAA,CAAA,WAAA,EAA7B;AACA,QAAM,UAAA,CAAA,OAAA,CAAQ,QAAR,CAAiB,cAAjB,CAAN;AACD,CAHD;AAKA,YAAA,CAAA,IAAA,CAAK,YAAA,CAAA,UAAL,EAAiB,4CAAjB,EACG,OADH,CACW,QADX,EACqB,wBADrB,EAEG,SAFH,CAEa,OAAO;AAAE,EAAA;AAAF,CAAP,EAAwC;AAAE,EAAA,MAAF;AAAU,EAAA;AAAV,CAAxC,KAA2D;AACpE,MAAI,MAAJ,EAAY;AACV,WAAO,GAAG,CAAC,YAAA,CAAA,iBAAD,CAAV;AACD;;AACD,QAAM,UAAA,CAAA,OAAA,CAAQ,QAAR,CAAiB,MAAM,CAAC,KAAP,CAAa,KAA9B,CAAN;AACA,QAAM,UAAA,CAAA,OAAA,CAAQ,MAAR,CAAe,MAAM,CAAC,KAAP,CAAa,SAA5B,CAAN;AACD,CARH","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\nconst config_env_1 = require(\"../internal/core/config/config-env\");\nconst global_dir_1 = require(\"../internal/util/global-dir\");\nconst task_names_1 = require(\"./task-names\");\nconfig_env_1.subtask(task_names_1.TASK_CLEAN_GLOBAL, async () => {\n    const globalCacheDir = await global_dir_1.getCacheDir();\n    await fs_extra_1.default.emptyDir(globalCacheDir);\n});\nconfig_env_1.task(task_names_1.TASK_CLEAN, \"Clears the cache and deletes all artifacts\")\n    .addFlag(\"global\", \"Clear the global cache\")\n    .setAction(async ({ global }, { config, run }) => {\n    if (global) {\n        return run(task_names_1.TASK_CLEAN_GLOBAL);\n    }\n    await fs_extra_1.default.emptyDir(config.paths.cache);\n    await fs_extra_1.default.remove(config.paths.artifacts);\n});\n//# sourceMappingURL=clean.js.map"]},"metadata":{},"sourceType":"script"}