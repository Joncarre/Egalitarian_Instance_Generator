{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/w10te/Documents/Generator-DApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/w10te/Documents/Generator-DApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/w10te/Documents/Generator-DApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import{useState}from'react';import{ethers}from'ethers';import Generator from'./artifacts/contracts/Generator.sol/Generator.json';// Update with the contract address logged out to the CLI when it was deployed \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var generatorAddress=\"0xE695d851089AC420a4bb5619349032Cfe21Da72b\";function App(){// store greeting in local state\nvar _useState=useState([\" \",\" \",\" \",\" \"]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];// request access to the user's MetaMask account\nfunction requestAccount(){return _requestAccount.apply(this,arguments);}function _requestAccount(){_requestAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.ethereum.request({method:'eth_requestAccounts'});case 2:case\"end\":return _context.stop();}}},_callee);}));return _requestAccount.apply(this,arguments);}function async_solveLastInstance(){return _async_solveLastInstance.apply(this,arguments);}function _async_solveLastInstance(){_async_solveLastInstance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var provider,signer,contract,transaction;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context2.next=11;break;}_context2.next=3;return requestAccount();case 3:provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();contract=new ethers.Contract(generatorAddress,Generator.abi,signer);_context2.next=8;return contract.solveLastInstance(user);case 8:transaction=_context2.sent;_context2.next=11;return transaction.wait();case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _async_solveLastInstance.apply(this,arguments);}function async_regResearcher(){return _async_regResearcher.apply(this,arguments);}// -----------------------------------------\nfunction _async_regResearcher(){_async_regResearcher=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var provider,signer,contract,transaction;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context3.next=11;break;}_context3.next=3;return requestAccount();case 3:provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();contract=new ethers.Contract(generatorAddress,Generator.abi,signer);_context3.next=8;return contract.regResearcher(user);case 8:transaction=_context3.sent;_context3.next=11;return transaction.wait();case 11:case\"end\":return _context3.stop();}}},_callee3);}));return _async_regResearcher.apply(this,arguments);}function async_createAInstance(){return _async_createAInstance.apply(this,arguments);}function _async_createAInstance(){_async_createAInstance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var provider,signer,contract,transaction;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context4.next=11;break;}_context4.next=3;return requestAccount();case 3:provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();contract=new ethers.Contract(generatorAddress,Generator.abi,signer);_context4.next=8;return contract.createAInstance({gasLimit:12000000});case 8:transaction=_context4.sent;_context4.next=11;return transaction.wait();case 11:case\"end\":return _context4.stop();}}},_callee4);}));return _async_createAInstance.apply(this,arguments);}function async_getInstance(){return _async_getInstance.apply(this,arguments);}function _async_getInstance(){_async_getInstance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var provider,contract,signer,result,startDate,endDate,arrayData;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context5.next=18;break;}provider=new ethers.providers.Web3Provider(window.ethereum);contract=new ethers.Contract(generatorAddress,Generator.abi,provider);_context5.prev=3;signer=provider.getSigner();_context5.next=7;return contract.connect(signer).getInstance();case 7:result=_context5.sent;startDate=new Date(parseInt(result[2]._hex.slice(2),16)*1000);endDate=new Date(parseInt(result[4]._hex.slice(2),16)*1000);arrayData=[result[1],startDate.getFullYear()+\"/\"+startDate.getMonth()+\"/\"+startDate.getDate()+\" \"+startDate.getHours()+\":\"+startDate.getMinutes()+\":\"+startDate.getSeconds(),result[3],endDate.getFullYear()+\"/\"+endDate.getMonth()+\"/\"+endDate.getDate()+\" \"+endDate.getHours()+\":\"+endDate.getMinutes()+\":\"+endDate.getSeconds()];setData(arrayData);console.log(arrayData);_context5.next=18;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](3);console.log(\"Error: \",_context5.t0);case 18:case\"end\":return _context5.stop();}}},_callee5,null,[[3,15]]);}));return _async_getInstance.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Researcher information\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async_regResearcher,children:\"Set orcid\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setUser(e.target.value);},placeholder:\"orcid\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Instance information\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async_createAInstance,children:\"Create A instance\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Create B instance\"}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:async_getInstance,children:\"Get instance\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Instance: \"}),data[0]]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Start date: \"}),data[1]]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Solution: \"}),data[2]]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Solved date: \"}),data[3]]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:async_solveLastInstance,children:\"Set solution\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setUser(e.target.value);},placeholder:\"solution\"})]});}export default App;","map":{"version":3,"sources":["C:/Users/w10te/Documents/Generator-DApp/src/App.js"],"names":["useState","ethers","Generator","generatorAddress","App","data","setData","user","setUser","requestAccount","window","ethereum","request","method","async_solveLastInstance","provider","providers","Web3Provider","signer","getSigner","contract","Contract","abi","solveLastInstance","transaction","wait","async_regResearcher","regResearcher","async_createAInstance","createAInstance","gasLimit","async_getInstance","connect","getInstance","result","startDate","Date","parseInt","_hex","slice","endDate","arrayData","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","console","log","e","target","value"],"mappings":"udAAA,MAAO,WAAP,CACA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oDAAtB,CAEA;wFACA,GAAMC,CAAAA,gBAAgB,CAAG,4CAAzB,CAEA,QAASC,CAAAA,GAAT,EAAe,CACb;AACA,cAAwBJ,QAAQ,CAAC,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,GAAhB,CAAD,CAAhC,wCAAOK,IAAP,eAAaC,OAAb,eACA,eAAwBN,QAAQ,CAAC,CAAD,CAAhC,yCAAOO,IAAP,eAAaC,OAAb,eAEE;AALW,QAMIC,CAAAA,cANJ,oJAMX,yJACQC,CAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,CAAEC,MAAM,CAAE,qBAAV,CAAxB,CADR,uDANW,yDAUIC,CAAAA,uBAVJ,+KAUX,sLACM,MAAOJ,CAAAA,MAAM,CAACC,QAAd,GAA2B,WADjC,mDAEUF,CAAAA,cAAc,EAFxB,QAGUM,QAHV,CAGqB,GAAId,CAAAA,MAAM,CAACe,SAAP,CAAiBC,YAArB,CAAkCP,MAAM,CAACC,QAAzC,CAHrB,CAIUO,MAJV,CAImBH,QAAQ,CAACI,SAAT,EAJnB,CAKUC,QALV,CAKqB,GAAInB,CAAAA,MAAM,CAACoB,QAAX,CAAoBlB,gBAApB,CAAsCD,SAAS,CAACoB,GAAhD,CAAqDJ,MAArD,CALrB,wBAM8BE,CAAAA,QAAQ,CAACG,iBAAT,CAA2BhB,IAA3B,CAN9B,QAMUiB,WANV,wCAOUA,CAAAA,WAAW,CAACC,IAAZ,EAPV,0DAVW,kEAqBIC,CAAAA,mBArBJ,sDAgCX;AAhCW,6GAqBX,sLACM,MAAOhB,CAAAA,MAAM,CAACC,QAAd,GAA2B,WADjC,mDAEUF,CAAAA,cAAc,EAFxB,QAGUM,QAHV,CAGqB,GAAId,CAAAA,MAAM,CAACe,SAAP,CAAiBC,YAArB,CAAkCP,MAAM,CAACC,QAAzC,CAHrB,CAIUO,MAJV,CAImBH,QAAQ,CAACI,SAAT,EAJnB,CAKUC,QALV,CAKqB,GAAInB,CAAAA,MAAM,CAACoB,QAAX,CAAoBlB,gBAApB,CAAsCD,SAAS,CAACoB,GAAhD,CAAqDJ,MAArD,CALrB,wBAM8BE,CAAAA,QAAQ,CAACO,aAAT,CAAuBpB,IAAvB,CAN9B,QAMUiB,WANV,wCAOUA,CAAAA,WAAW,CAACC,IAAZ,EAPV,0DArBW,8DAiCIG,CAAAA,qBAjCJ,yKAiCX,sLACM,MAAOlB,CAAAA,MAAM,CAACC,QAAd,GAA2B,WADjC,mDAEUF,CAAAA,cAAc,EAFxB,QAGUM,QAHV,CAGqB,GAAId,CAAAA,MAAM,CAACe,SAAP,CAAiBC,YAArB,CAAkCP,MAAM,CAACC,QAAzC,CAHrB,CAIUO,MAJV,CAImBH,QAAQ,CAACI,SAAT,EAJnB,CAKUC,QALV,CAKqB,GAAInB,CAAAA,MAAM,CAACoB,QAAX,CAAoBlB,gBAApB,CAAsCD,SAAS,CAACoB,GAAhD,CAAqDJ,MAArD,CALrB,wBAM8BE,CAAAA,QAAQ,CAACS,eAAT,CAAyB,CACjDC,QAAQ,CAAE,QADuC,CAAzB,CAN9B,QAMUN,WANV,wCASUA,CAAAA,WAAW,CAACC,IAAZ,EATV,0DAjCW,gEA8CIM,CAAAA,iBA9CJ,6JA8CX,6MACM,MAAOrB,CAAAA,MAAM,CAACC,QAAd,GAA2B,WADjC,4BAEUI,QAFV,CAEqB,GAAId,CAAAA,MAAM,CAACe,SAAP,CAAiBC,YAArB,CAAkCP,MAAM,CAACC,QAAzC,CAFrB,CAGUS,QAHV,CAGqB,GAAInB,CAAAA,MAAM,CAACoB,QAAX,CAAoBlB,gBAApB,CAAsCD,SAAS,CAACoB,GAAhD,CAAqDP,QAArD,CAHrB,kBAKYG,MALZ,CAKqBH,QAAQ,CAACI,SAAT,EALrB,wBAM2BC,CAAAA,QAAQ,CAACY,OAAT,CAAiBd,MAAjB,EAAyBe,WAAzB,EAN3B,QAMYC,MANZ,gBAOUC,SAPV,CAOsB,GAAIC,CAAAA,IAAJ,CAASC,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAN,CAAUI,IAAV,CAAeC,KAAf,CAAqB,CAArB,CAAD,CAA0B,EAA1B,CAAR,CAAsC,IAA/C,CAPtB,CAQUC,OARV,CAQoB,GAAIJ,CAAAA,IAAJ,CAASC,QAAQ,CAACH,MAAM,CAAC,CAAD,CAAN,CAAUI,IAAV,CAAeC,KAAf,CAAqB,CAArB,CAAD,CAA0B,EAA1B,CAAR,CAAsC,IAA/C,CARpB,CASUE,SATV,CASsB,CACdP,MAAM,CAAC,CAAD,CADQ,CAEdC,SAAS,CAACO,WAAV,GAA0B,GAA1B,CAAgCP,SAAS,CAACQ,QAAV,EAAhC,CAAuD,GAAvD,CAA6DR,SAAS,CAACS,OAAV,EAA7D,CAAoF,GAApF,CAA0FT,SAAS,CAACU,QAAV,EAA1F,CAAiH,GAAjH,CAAuHV,SAAS,CAACW,UAAV,EAAvH,CAAgJ,GAAhJ,CAAsJX,SAAS,CAACY,UAAV,EAFxI,CAGdb,MAAM,CAAC,CAAD,CAHQ,CAIdM,OAAO,CAACE,WAAR,GAAwB,GAAxB,CAA8BF,OAAO,CAACG,QAAR,EAA9B,CAAmD,GAAnD,CAAyDH,OAAO,CAACI,OAAR,EAAzD,CAA8E,GAA9E,CAAoFJ,OAAO,CAACK,QAAR,EAApF,CAAyG,GAAzG,CAA+GL,OAAO,CAACM,UAAR,EAA/G,CAAsI,GAAtI,CAA4IN,OAAO,CAACO,UAAR,EAJ9H,CATtB,CAeMzC,OAAO,CAACmC,SAAD,CAAP,CACAO,OAAO,CAACC,GAAR,CAAYR,SAAZ,EAhBN,qFAkBMO,OAAO,CAACC,GAAR,CAAY,SAAZ,eAlBN,uEA9CW,oDAqEb,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,8CADF,cAEE,eAAQ,OAAO,CAAEvB,mBAAjB,uBAFF,cAGE,cAAO,QAAQ,CAAE,kBAAAwB,CAAC,QAAI1C,CAAAA,OAAO,CAAC0C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EAAlB,CAA+C,WAAW,CAAC,OAA3D,EAHF,cAIE,4CAJF,cAKE,eAAQ,OAAO,CAAExB,qBAAjB,+BALF,cAME,6CANF,cAOE,YAPF,cAQE,eAAQ,OAAO,CAAEG,iBAAjB,0BARF,cASE,oCACE,kCAAG,kCAAH,CAAuB1B,IAAI,CAAC,CAAD,CAA3B,GADF,cAEE,kCAAG,oCAAH,CAAyBA,IAAI,CAAC,CAAD,CAA7B,GAFF,cAGE,kCAAG,kCAAH,CAAuBA,IAAI,CAAC,CAAD,CAA3B,GAHF,cAIE,kCAAG,qCAAH,CAA0BA,IAAI,CAAC,CAAD,CAA9B,GAJF,GATF,cAeE,eAAQ,OAAO,CAAES,uBAAjB,0BAfF,cAgBE,cAAO,QAAQ,CAAE,kBAAAoC,CAAC,QAAI1C,CAAAA,OAAO,CAAC0C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,EAAlB,CAA+C,WAAW,CAAC,UAA3D,EAhBF,GADF,CAoBD,CAED,cAAehD,CAAAA,GAAf","sourcesContent":["import './App.css';\nimport { useState } from 'react';\nimport { ethers } from 'ethers';\nimport Generator from './artifacts/contracts/Generator.sol/Generator.json'\n\n// Update with the contract address logged out to the CLI when it was deployed \nconst generatorAddress = \"0xE695d851089AC420a4bb5619349032Cfe21Da72b\"\n\nfunction App() {\n  // store greeting in local state\n  const [data, setData] = useState([\" \", \" \", \" \", \" \"])\n  const [user, setUser] = useState(0)\n\n    // request access to the user's MetaMask account\n    async function requestAccount() {\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n    }\n\n    async function async_solveLastInstance() {\n      if (typeof window.ethereum !== 'undefined') {\n        await requestAccount()\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner()\n        const contract = new ethers.Contract(generatorAddress, Generator.abi, signer);\n        const transaction = await contract.solveLastInstance(user)\n        await transaction.wait()\n      }\n    }\n\n    async function async_regResearcher() {\n      if (typeof window.ethereum !== 'undefined') {\n        await requestAccount()\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner()\n        const contract = new ethers.Contract(generatorAddress, Generator.abi, signer);\n        const transaction = await contract.regResearcher(user)\n        await transaction.wait()\n      }\n    }\n\n    // -----------------------------------------\n    async function async_createAInstance() {\n      if (typeof window.ethereum !== 'undefined') {\n        await requestAccount()\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner()\n        const contract = new ethers.Contract(generatorAddress, Generator.abi, signer);\n        const transaction = await contract.createAInstance({\n          gasLimit: 12000000\n        })\n        await transaction.wait()\n      }\n    }\n\n    async function async_getInstance() {\n      if (typeof window.ethereum !== 'undefined') {\n        const provider = new ethers.providers.Web3Provider(window.ethereum)\n        const contract = new ethers.Contract(generatorAddress, Generator.abi, provider);\n        try {\n          const signer = provider.getSigner()\n          const result = await contract.connect(signer).getInstance()\n          let startDate = new Date(parseInt(result[2]._hex.slice(2), 16)*1000);\n          let endDate = new Date(parseInt(result[4]._hex.slice(2), 16)*1000);         \n          let arrayData = [\n            result[1], \n            startDate.getFullYear() + \"/\" + startDate.getMonth() + \"/\" + startDate.getDate()  + \" \" + startDate.getHours() + \":\" + startDate.getMinutes() + \":\" + startDate.getSeconds(),\n            result[3], \n            endDate.getFullYear() + \"/\" + endDate.getMonth() + \"/\" + endDate.getDate()  + \" \" + endDate.getHours() + \":\" + endDate.getMinutes() + \":\" + endDate.getSeconds()\n          ]\n          setData(arrayData)\n          console.log(arrayData)\n        } catch (err) {\n          console.log(\"Error: \", err)\n        }\n      }    \n    }\n\n  return (\n    <div className=\"App\">\n      <h3>Researcher information</h3>\n      <button onClick={async_regResearcher}>Set orcid</button>\n      <input onChange={e => setUser(e.target.value)} placeholder=\"orcid\" />\n      <h3>Instance information</h3>\n      <button onClick={async_createAInstance}>Create A instance</button>\n      <button>Create B instance</button>\n      <p></p>\n      <button onClick={async_getInstance}>Get instance</button>\n      <div>\n        <p><h5>Instance: </h5>{data[0]}</p>\n        <p><h5>Start date: </h5>{data[1]}</p>\n        <p><h5>Solution: </h5>{data[2]}</p>\n        <p><h5>Solved date: </h5>{data[3]}</p>\n      </div>\n      <button onClick={async_solveLastInstance}>Set solution</button>\n      <input onChange={e => setUser(e.target.value)} placeholder=\"solution\" />\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}