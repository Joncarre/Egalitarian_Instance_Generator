{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showForkRecommendationsBannerIfNecessary = void 0;\n\nconst chalk_1 = __importDefault(require(\"chalk\"));\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst path_1 = __importDefault(require(\"path\"));\n\nfunction getAlreadyShownFilePath(forkCachePath) {\n  return path_1.default.join(forkCachePath, \"recommendations-already-shown.json\");\n}\n\nfunction displayBanner() {\n  console.warn(chalk_1.default.yellow(`You're running a network fork starting from the latest block.\nPerformance may degrade due to fetching data from the network with each run.\nIf connecting to an archival node (e.g. Alchemy), we strongly recommend setting\nblockNumber to a fixed value to increase performance with a local cache.`));\n}\n\nasync function showForkRecommendationsBannerIfNecessary(currentNetworkConfig, forkCachePath) {\n  var _a, _b;\n\n  if (!(\"forking\" in currentNetworkConfig)) {\n    return;\n  }\n\n  if (((_a = currentNetworkConfig.forking) === null || _a === void 0 ? void 0 : _a.enabled) !== true) {\n    return;\n  }\n\n  if (((_b = currentNetworkConfig.forking) === null || _b === void 0 ? void 0 : _b.blockNumber) !== undefined) {\n    return;\n  }\n\n  const shownPath = getAlreadyShownFilePath(forkCachePath);\n\n  if (await fs_extra_1.default.pathExists(shownPath)) {\n    return;\n  }\n\n  displayBanner();\n  await fs_extra_1.default.ensureDir(path_1.default.dirname(shownPath));\n  await fs_extra_1.default.writeJSON(shownPath, true);\n}\n\nexports.showForkRecommendationsBannerIfNecessary = showForkRecommendationsBannerIfNecessary;","map":{"version":3,"sources":["../../../../src/internal/hardhat-network/provider/utils/fork-recomendations-banner.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,MAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,MAAA,UAAA,GAAA,eAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;;AACA,MAAA,MAAA,GAAA,eAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AAIA,SAAS,uBAAT,CAAiC,aAAjC,EAAsD;AACpD,SAAO,MAAA,CAAA,OAAA,CAAK,IAAL,CAAU,aAAV,EAAyB,oCAAzB,CAAP;AACD;;AAED,SAAS,aAAT,GAAsB;AACpB,EAAA,OAAO,CAAC,IAAR,CACE,OAAA,CAAA,OAAA,CAAM,MAAN,CACE;;;AAGmE,yEAJrE,CADF;AAQD;;AAEM,eAAe,wCAAf,CACL,oBADK,EAEL,aAFK,EAEgB;;;AAErB,MAAI,EAAE,aAAa,oBAAf,CAAJ,EAA0C;AACxC;AACD;;AAED,MAAI,CAAA,CAAA,EAAA,GAAA,oBAAoB,CAAC,OAArB,MAA4B,IAA5B,IAA4B,EAAA,KAAA,KAAA,CAA5B,GAA4B,KAAA,CAA5B,GAA4B,EAAA,CAAE,OAA9B,MAA0C,IAA9C,EAAoD;AAClD;AACD;;AAED,MAAI,CAAA,CAAA,EAAA,GAAA,oBAAoB,CAAC,OAArB,MAA4B,IAA5B,IAA4B,EAAA,KAAA,KAAA,CAA5B,GAA4B,KAAA,CAA5B,GAA4B,EAAA,CAAE,WAA9B,MAA8C,SAAlD,EAA6D;AAC3D;AACD;;AAED,QAAM,SAAS,GAAG,uBAAuB,CAAC,aAAD,CAAzC;;AAEA,MAAI,MAAM,UAAA,CAAA,OAAA,CAAQ,UAAR,CAAmB,SAAnB,CAAV,EAAyC;AACvC;AACD;;AAED,EAAA,aAAa;AAEb,QAAM,UAAA,CAAA,OAAA,CAAQ,SAAR,CAAkB,MAAA,CAAA,OAAA,CAAK,OAAL,CAAa,SAAb,CAAlB,CAAN;AACA,QAAM,UAAA,CAAA,OAAA,CAAQ,SAAR,CAAkB,SAAlB,EAA6B,IAA7B,CAAN;AACD;;AA1BD,OAAA,CAAA,wCAAA,GAAA,wCAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.showForkRecommendationsBannerIfNecessary = void 0;\nconst chalk_1 = __importDefault(require(\"chalk\"));\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\nconst path_1 = __importDefault(require(\"path\"));\nfunction getAlreadyShownFilePath(forkCachePath) {\n    return path_1.default.join(forkCachePath, \"recommendations-already-shown.json\");\n}\nfunction displayBanner() {\n    console.warn(chalk_1.default.yellow(`You're running a network fork starting from the latest block.\nPerformance may degrade due to fetching data from the network with each run.\nIf connecting to an archival node (e.g. Alchemy), we strongly recommend setting\nblockNumber to a fixed value to increase performance with a local cache.`));\n}\nasync function showForkRecommendationsBannerIfNecessary(currentNetworkConfig, forkCachePath) {\n    var _a, _b;\n    if (!(\"forking\" in currentNetworkConfig)) {\n        return;\n    }\n    if (((_a = currentNetworkConfig.forking) === null || _a === void 0 ? void 0 : _a.enabled) !== true) {\n        return;\n    }\n    if (((_b = currentNetworkConfig.forking) === null || _b === void 0 ? void 0 : _b.blockNumber) !== undefined) {\n        return;\n    }\n    const shownPath = getAlreadyShownFilePath(forkCachePath);\n    if (await fs_extra_1.default.pathExists(shownPath)) {\n        return;\n    }\n    displayBanner();\n    await fs_extra_1.default.ensureDir(path_1.default.dirname(shownPath));\n    await fs_extra_1.default.writeJSON(shownPath, true);\n}\nexports.showForkRecommendationsBannerIfNecessary = showForkRecommendationsBannerIfNecessary;\n//# sourceMappingURL=fork-recomendations-banner.js.map"]},"metadata":{},"sourceType":"script"}